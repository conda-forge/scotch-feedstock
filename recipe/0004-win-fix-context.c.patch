From 528bc3fb6ee8d14be543d74d8e63200446d7d86f Mon Sep 17 00:00:00 2001
From: Min RK <benjaminrk@gmail.com>
Date: Thu, 7 Aug 2025 15:09:39 -0700
Subject: [PATCH 4/6] win fix context.c

fix context offset on Windows

origin: conda-forge PR 73
https://github.com/conda-forge/scotch-feedstock/pull/73
---
 src/libscotch/context.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/libscotch/context.c b/src/libscotch/context.c
index acda708..e73bb10 100644
--- a/src/libscotch/context.c
+++ b/src/libscotch/context.c
@@ -89,10 +89,11 @@ contextOptionsInit (
 Context * const             contptr)
 {
   int                 o;
+  size_t offset = sizeof(contextvaluesdat.vinttab);
 
   o = contextValuesInit (contptr, &contextvaluesdat, sizeof (contextvaluesdat),
-                         CONTEXTOPTIONNUMNBR, (byte *) &contextvaluesdat.vinttab - (byte *) &contextvaluesdat,
-                         CONTEXTOPTIONDBLNBR, (byte *) &contextvaluesdat.vdbltab - (byte *) &contextvaluesdat);
+                         CONTEXTOPTIONNUMNBR, offset,
+                         CONTEXTOPTIONDBLNBR, offset + sizeof (contextvaluesdat.vinttab));
 
   if (o == 0) {                                   /* If values array allocated, update it with existing environment variables */
     INT                 deteval;
-- 
2.49.0

