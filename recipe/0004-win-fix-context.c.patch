From 1f27bf18f06ccd8d77d7e6af4d785431e864a0da Mon Sep 17 00:00:00 2001
From: Min RK <benjaminrk@gmail.com>
Date: Thu, 7 Aug 2025 15:09:39 -0700
Subject: [PATCH 4/6] win fix context.c

fix context offset on Windows

origin: conda-forge PR 73
https://github.com/conda-forge/scotch-feedstock/pull/73
---
 src/libscotch/context.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/libscotch/context.c b/src/libscotch/context.c
index fbd8cbc..2531a7a 100644
--- a/src/libscotch/context.c
+++ b/src/libscotch/context.c
@@ -88,7 +88,8 @@ int
 contextOptionsInit (
 Context * const             contptr)
 {
+  size_t offset = sizeof(contextvaluesdat.vinttab);
   return (contextValuesInit (contptr, &contextvaluesdat, sizeof (contextvaluesdat),
-                             CONTEXTOPTIONNUMNBR, (byte *) &contextvaluesdat.vinttab - (byte *) &contextvaluesdat,
-                             CONTEXTOPTIONDBLNBR, (byte *) &contextvaluesdat.vdbltab - (byte *) &contextvaluesdat));
+                             CONTEXTOPTIONNUMNBR, offset,
+                             CONTEXTOPTIONDBLNBR, offset + sizeof (contextvaluesdat.vinttab)));
 }
-- 
2.49.0

